<component>
	<previews>
		<preview width="320" height="370" />
	</previews>

	<styles>
		<style
			name="style_center"
			width="160"
			height="160"
			radius="100"
			bg_color="#bg_primary_light"
			border_width="0"
			shadow_color="#dark"
			shadow_offset_y="6"
			shadow_opa="61"
			shadow_spread="0"
			shadow_width="32"
		/>
		<style name="style_center_dark" bg_color="#bg_tertiary_dark" text_color="#surface_primary_dark" />

		<style name="style_arc_no_line" arc_width="0" />
		<style name="style_arc_knob" pad_all="4" bg_color="#accent1_light" />

		<!-- Main style for the scale, sets the text color  of 16 and 24  -->
		<style
			name="style_scale_main"
			width="200"
			height="200"
			arc_width="0"
			text_font="geist_semibold_12"
			text_color="#surface_primary_light"
		/>
		<style name="style_scale_main_dark" text_color="#surface_primary_dark" />

		<!-- Use the same style for minor and major ticks -->
		<style name="style_scale_ticks" line_color="#surface_primary_light" line_width="4" line_opa="30%" length="5" />
		<style name="style_scale_ticks_dark" line_color="#surface_primary_dark" />

		<!-- Color of the section. Its max value is bound to a subject -->
		<style name="style_scale_section_ticks" line_color="#accent1_dark" line_width="12" line_opa="100%" />
	</styles>
	<view extends="card">
		<card_header title="Thermostat">
			<switch bind_checked="thermostat_on" />
		</card_header>

		<div style_layout="none" style_pad_ver="12">
			<bind_style subject="thermostat_on" name="style_disabled" ref_value="0" />

			<lv_obj name="center" align="center">
				<style name="style_center" />
				<bind_style subject="dark_theme" ref_value="1" name="style_center_dark" />

				<lv_label
					bind_text="room_temp"
					bind_text-fmt="%d °C"
					style_text_font="geist_semibold_28"
					align="center"
				/>
			</lv_obj>

			<lv_scale
				name="thermostat_scale_light"
				align="center"
				major_tick_every="10"
				mode="round_outer"
				angle_range="180"
				min_value="16"
				max_value="28"
				rotation="180"
			>
				<style name="style_scale_main" />
				<bind_style name="style_scale_main_dark" subject="dark_theme" ref_value="1" />
				<style name="style_scale_ticks" selector="items" />
				<style name="style_scale_ticks" selector="indicator" />

				<bind_style name="style_scale_ticks_dark" subject="dark_theme" ref_value="1" selector="items" />
				<bind_style name="style_scale_ticks_dark" subject="dark_theme" ref_value="1" selector="indicator" />

				<lv_scale-section
					min_value="16"
					bind_max_value="thermostat_temp"
					style_items="style_scale_section_ticks"
					style_indicator="style_scale_section_ticks"
				/>
			</lv_scale>

			<lv_arc
				width="120"
				height="120"
				ext_click_area="60"
				align="center"
				bind_value="thermostat_temp"
				min_value="16"
				max_value="28"
				bg_start_angle="180"
				bg_end_angle="360"
				start_angle="180"
			>
				<bind_state_if_eq subject="thermostat_on" state="disabled" ref_value="0" />
				<style name="style_arc_no_line" selector="main" />
				<style name="style_arc_no_line" selector="indicator" />
				<style name="style_arc_knob" selector="knob" />
			</lv_arc>
		</div>

		<!-- TODO create a thermostat_status string subject and set its value from code -->
		<div style_flex_track_place="center" style_margin_top="-12">
			<lv_label text="Heating up to 24 °C" />
		</div>
	</view>
</component>
